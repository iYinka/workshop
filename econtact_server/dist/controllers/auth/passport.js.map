{"version":3,"file":"passport.js","names":["_passportGoogleOauth","require","_userModel","_interopRequireDefault","e","__esModule","GoogleAuth","exports","passport","use","GoogleStrategy","clientID","process","env","GOOGLE_CLIENT_ID","clientSecret","GOOGLE_CLIENT_SECRET","callbackURL","userProfileURL","scope","accessToken","refreshToken","profile","callback","console","log","User","findOrCreate","googleId","id","err","user","serializeUser","done","deserializeUser","findById"],"sources":["../../../src/controllers/auth/passport.js"],"sourcesContent":["import { GoogleStrategy } from \"passport-google-oauth20\";\r\nimport User from \"../../model/userModel.js\";\r\n\r\n////////////GOOGLE AUTH2.0///////////////\r\nexport const GoogleAuth = () => {\r\n    // eslint-disable-next-line no-undef\r\n    passport.use(\r\n        new GoogleStrategy(\r\n            {\r\n                clientID: process.env.GOOGLE_CLIENT_ID,\r\n                clientSecret: process.env.GOOGLE_CLIENT_SECRET,\r\n                callbackURL: `auth/google/callback`,\r\n                userProfileURL: \"https://www.googleapis.com/oauth2/v3/userinfo\",\r\n                scope: [\"profile\", \"email\"],\r\n            },\r\n            function (accessToken, refreshToken, profile, callback) {\r\n                console.log(profile);\r\n                callback(null, profile);\r\n                User.findOrCreate(\r\n                    { googleId: profile.id },\r\n                    function (err, user) {\r\n                        return callback(err, user);\r\n                    }\r\n                );\r\n            }\r\n        )\r\n    );\r\n\r\n    //This serialization of session works for all OAuth.\r\n    // eslint-disable-next-line no-undef\r\n    passport.serializeUser(function (user, done) {\r\n        done(null, user.id);\r\n    });\r\n\r\n    // eslint-disable-next-line no-undef\r\n    passport.deserializeUser(function (id, done) {\r\n        User.findById(id, function (err, user) {\r\n            done(err, user);\r\n        });\r\n    });\r\n};\r\n"],"mappings":";;;;;;AAAA,IAAAA,oBAAA,GAAAC,OAAA;AACA,IAAAC,UAAA,GAAAC,sBAAA,CAAAF,OAAA;AAA4C,SAAAE,uBAAAC,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,gBAAAA,CAAA;AAE5C;AACO,IAAME,UAAU,GAAAC,OAAA,CAAAD,UAAA,GAAG,SAAbA,UAAUA,CAAA,EAAS;EAC5B;EACAE,QAAQ,CAACC,GAAG,CACR,IAAIC,mCAAc,CACd;IACIC,QAAQ,EAAEC,OAAO,CAACC,GAAG,CAACC,gBAAgB;IACtCC,YAAY,EAAEH,OAAO,CAACC,GAAG,CAACG,oBAAoB;IAC9CC,WAAW,wBAAwB;IACnCC,cAAc,EAAE,+CAA+C;IAC/DC,KAAK,EAAE,CAAC,SAAS,EAAE,OAAO;EAC9B,CAAC,EACD,UAAUC,WAAW,EAAEC,YAAY,EAAEC,OAAO,EAAEC,QAAQ,EAAE;IACpDC,OAAO,CAACC,GAAG,CAACH,OAAO,CAAC;IACpBC,QAAQ,CAAC,IAAI,EAAED,OAAO,CAAC;IACvBI,qBAAI,CAACC,YAAY,CACb;MAAEC,QAAQ,EAAEN,OAAO,CAACO;IAAG,CAAC,EACxB,UAAUC,GAAG,EAAEC,IAAI,EAAE;MACjB,OAAOR,QAAQ,CAACO,GAAG,EAAEC,IAAI,CAAC;IAC9B,CACJ,CAAC;EACL,CACJ,CACJ,CAAC;;EAED;EACA;EACAvB,QAAQ,CAACwB,aAAa,CAAC,UAAUD,IAAI,EAAEE,IAAI,EAAE;IACzCA,IAAI,CAAC,IAAI,EAAEF,IAAI,CAACF,EAAE,CAAC;EACvB,CAAC,CAAC;;EAEF;EACArB,QAAQ,CAAC0B,eAAe,CAAC,UAAUL,EAAE,EAAEI,IAAI,EAAE;IACzCP,qBAAI,CAACS,QAAQ,CAACN,EAAE,EAAE,UAAUC,GAAG,EAAEC,IAAI,EAAE;MACnCE,IAAI,CAACH,GAAG,EAAEC,IAAI,CAAC;IACnB,CAAC,CAAC;EACN,CAAC,CAAC;AACN,CAAC","ignoreList":[]}